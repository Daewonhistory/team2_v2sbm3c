<!DOCTYPE html>

<html layout:decorate="~{layout}"> <!-- layout.html 상속-->
<div layout:fragment="content">
  <div class='title_line'>
	메뉴 등록
  </div>
  
  <aside class="aside_right">
    <a href="javascript:location.reload();">새로고침</a>
    <span class='menu_divide'>│</span>
    <a th:href="@{|./list_seach_paging?word=&now_page=1|}">목록</a>    
  </aside>
  
  <div class='menu_line'></div>
  
  <form name='frm' method='post' th:object="${menuVO}" action='./create' enctype="multipart/form-data">
    <input type="hidden" name="word" th:value="${word}">
    <input type="hidden" name="now_page" th:value="${now_page}">
    <input type="hidden" name="restno" th:value="${restno}">
    
    <div>
       <label>메뉴명</label>
       <input type='text' name='name' value='백반' required="required" 
                 autofocus="autofocus" class="form-control" style='width: 100%;'>
    </div>
    <div>
       <label>가격</label>
       <input type="number" name='price' value='10000' required="required" class="form-control" style='width: 100%;'></input>
    </div>
	<div id="ingredients">
            <label>재료:</label>
            <div class="ingredient">
                <input type="" name="ingredients[]" required>
                <button type="button" onclick="removeIngredient(this)">삭제</button>
            </div>
        </div>
        
        <button type="button" onclick="addIngredient()">재료 추가</button><br><br>
    <div>
       <label>이미지</label>
       <input type='file' class="form-control" name='file1MF' id='file1MF' value='' placeholder="파일 선택">
    </div>     
    <div class="content_body_bottom">
      <button type="submit" class="btn btn-secondary btn-sm">등록</button>
      <button type="button" th:attr="onclick=|location.href='./list_search_paging?word=${word}&now_page=${now_page}'|" class="btn btn-secondary btn-sm">목록</button>
    </div>
  
  </form>
	<script>
		function addIngredient() {
		    const ingredientDiv = document.createElement('div');
		    ingredientDiv.classList.add('ingredient');
		    
		    const ingredientInput = document.createElement('input');
		    ingredientInput.type = 'text';
		    ingredientInput.name = 'ingredients[]';
		    ingredientInput.required = true;
		    
		    const removeButton = document.createElement('button');
		    removeButton.type = 'button';
		    removeButton.innerText = '삭제';
		    removeButton.onclick = function() {
		        removeIngredient(removeButton);
		    };
		    
		    ingredientDiv.appendChild(ingredientInput);
		    ingredientDiv.appendChild(removeButton);
		    
		    document.getElementById('ingredients').appendChild(ingredientDiv);
		}
		
		// 재료 입력 필드를 제거하는 함수
		function removeIngredient(button) {
		    const ingredientDiv = button.parentElement;
		    document.getElementById('ingredients').removeChild(ingredientDiv);
		}
	</script>
</div>
</html>

  