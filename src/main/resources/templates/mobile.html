<!DOCTYPE html>
<html layout:decorate="~{mobile_layout}">
<div layout:fragment="content">
	<section id="home" style="height: 300px">
        <div class="slider" id="slider">
		  <div class="slide"><a href="https://www.naver.com"><img src="/images/1.jpg" alt="Slide 1"></a></div>
		  <div class="slide"><img src="/images/2.jpg" alt="Slide 2"></div>
		  <div class="slide"><img src="/images/3.jpg" alt="Slide 3"></div>
		  <!-- Add more slides as needed -->
		  <button class="arrow left" id="prev">&lt;</button>
		  <button class="arrow right" id="next">&gt;</button>
		</div>
		<div style="height: 15%;display: flex;justify-content: center;align-items: center;">
			<div class="radio_buttons" id="radio_buttons"></div>
		</div>
			
    </section>
    <section id="cate_shortcut_section" style="display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;">
        <h2>카테고리 숏컷</h2>
    	<table class="table table-hover" style="height: 100px">
		    <colgroup>
		      <col style='width: 20%;'/>
		      <col style='width: 20%;'/>
		      <col style='width: 20%;'/>
		      <col style='width: 20%;'/>    
		      <col style='width: 20%;'/>
		    </colgroup>
		    <tbody style="height: 50%">
		    	<tr style="height: 30%">
		    		<td><div><img src="">한식</div></td>
		    		<td>중식</td>
		    		<td>일식</td>
		    		<td>양식</td>
		    		<td>디저트</td>
		    	</tr>
		    	<tr style="height: 30%">
		    		<td>한식</td>
		    		<td>중식</td>
		    		<td>일식</td>
		    		<td>양식</td>
		    		<td>디저트</td>
		    	</tr>
		    </tbody>
        </table>
    </section>
    <section id="loca_shortcut_section">
        <h2>위치기반 숏컷</h2>
        <div id="midarea_div">
        	<button type="button" value="9" onclick="openBotarea(this)">서울</button>
            <button type="button" value="2" onclick="openBotarea(this)">경기</button>
            <button type="button" value="17" onclick="openBotarea(this)">충북</button>
            <button type="button" value="16" onclick="openBotarea(this)">충남</button>
            <button type="button" value="1" onclick="openBotarea(this)">강원도</button>
            <button type="button" value="4" onclick="openBotarea(this)">경북</button>
            <button type="button" value="3" onclick="openBotarea(this)">경남</button>
            <button type="button" value="14" onclick="openBotarea(this)">전북</button>
            <button type="button" value="13" onclick="openBotarea(this)">전남</button>
            <button type="button" value="15" onclick="openBotarea(this)">제주</button>
            <button type="button" value="10" onclick="openBotarea(this)">세종</button>
            <button type="button" value="6" onclick="openBotarea(this)">대구</button>
            <button type="button" value="5" onclick="openBotarea(this)">광주</button>
            <button type="button" value="7" onclick="openBotarea(this)">대전</button>
            <button type="button" value="11" onclick="openBotarea(this)">울산</button>
            <button type="button" value="8" onclick="openBotarea(this)">부산</button>
            <button type="button" value="12" onclick="openBotarea(this)">인천</button>
        </div>
        
        <div id="botarea_div" style="display:none">
        	
        </div>
    </section>
    <section id="section1">
        <h2>최고인기 식당</h2>
        <div id="wrap-vertical">
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강남구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강남구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강북구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div>
            		식당명<br>평점:5.0<span class="rest-area">서울시 구로구</span>
            	</div>
            </div>
        </div>
    </section>
    <section id="section1">
        <h2>주변인기 식당</h2>
        <div id="wrap-vertical">
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강남구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강남구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강북구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div>
            		식당명<br>평점:5.0<span class="rest-area">서울시 구로구</span>
            	</div>
            </div>
        </div>
    </section><section id="section1">
        <h2><식재료>취향저격 식당</h2>
        <div id="wrap-vertical">
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강남구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강남구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div class="restinfo">
            		식당명<br>평점:5.0<span class="rest-area">서울시 강북구</span>
            	</div>
            </div>
            <div class="image-container">
            	<img src="/images/1.jpg" alt="Image 1">
            	<div>
            		식당명<br>평점:5.0<span class="rest-area">서울시 구로구</span>
            	</div>
            </div>
        </div>
    </section>
	    <script>
		let slider = document.getElementById('slider');
		let isDown = false;
		let startX;
		let walk;
		
		slider.addEventListener('mousedown', (e) => {
		  isDown = true;
		  startX = e.pageX;
		  walk = 0;
		  slider.style.cursor = 'grabbing';
		});
		
		slider.addEventListener('mouseleave', () => {
		  if (!isDown) return;
		  isDown = false;
		  slider.style.cursor = 'grab';
		  if (walk < -50) {
		    nextSlide();
		  } else if (walk > 50) {
		    prevSlide();
		  } else {
		    showSlide(currentIndex); // Reset to the current slide if not dragged far enough
		  }
		});
		
		slider.addEventListener('mouseup', () => {
		  if (!isDown) return;
		  isDown = false;
		  slider.style.cursor = 'grab';
		  if (walk < -50) {
		    nextSlide();
		  } else if (walk > 50) {
		    prevSlide();
		  } else {
		    showSlide(currentIndex); // Reset to the current slide if not dragged far enough
		  }
		});
		
		slider.addEventListener('mousemove', (e) => {
		  if (!isDown) return;
		  e.preventDefault();
		  const x = e.pageX;
		  walk = x - startX;
		  slides.forEach((slide, index) => {
		    slide.style.transform = `translateX(${100 * (index - currentIndex) + (walk / slider.clientWidth) * 100}%)`;
		  });
		});
		
		let currentIndex = 0;
		const slides = document.querySelectorAll('.slide');
		const radioButtonsContainer = document.getElementById('radio_buttons');
		
		// Create radio buttons dynamically based on the number of slides
		slides.forEach((slide, index) => {
		  const radio = document.createElement('input');
		  radio.type = 'radio';
		  radio.className = 'radio_button';
		  radio.name = 'slider';
		  radio.id = `radio_${index + 1}`;
		  if (index === 0) radio.checked = true;
		
		  radio.addEventListener('change', () => {
		    showSlide(index);
		  });
		
		  radioButtonsContainer.appendChild(radio);
		});
		
		function showSlide(index) {
		  slides.forEach((slide, i) => {
		    slide.style.transform = `translateX(${100 * (i - index)}%)`;
		  });
		  document.getElementById(`radio_${index + 1}`).checked = true;
		  currentIndex = index;
		}
		
		function nextSlide() {
		  currentIndex = (currentIndex + 1) % slides.length;
		  showSlide(currentIndex);
		}
		
		function prevSlide() {
		  currentIndex = (currentIndex - 1 + slides.length) % slides.length;
		  showSlide(currentIndex);
		}
		
		document.getElementById('next').addEventListener('click', nextSlide);
		document.getElementById('prev').addEventListener('click', prevSlide);
		
		showSlide(currentIndex);
		
		function openBotarea(eventButton){
			let selected_midarea_btn = eventButton;
			let btn_red = document.getElementsByClassName('btn_red');
			if(btn_red.length != 0){
				btn_red[0].classList.remove('btn_red');
			}
			selected_midarea_btn.classList.add('btn_red');
			let selected_midareano = selected_midarea_btn.value;
			let botarea_div = document.getElementById("botarea_div");
			//fetch부분
			botarea_div.innerHTML = 
				'<input type="text" value="'+selected_midareano+'"><br>'+
				'<button type="button" onclick="selectBotarea(this)" value="0">' + selected_midarea_btn .textContent + '전체</button>'+
				`<button type="button onclick="selectBotarea(this)" value="1">강남구</button>
	            <button type="button" onclick="selectBotarea(this)" value="1">강동구</button>
	            <button type="button" onclick="selectBotarea(this)" value="1">강북구</button>
	            <button type="button" onclick="selectBotarea(this)" value="1">강서구</button>
	            <button type="button" onclick="selectBotarea(this)" value="1">관악구</button>
	            <button type="button" onclick="selectBotarea(this)" value="1">광진구</button>`;
			botarea_div.style.display="block";
		}
		
		function selectBotarea(eventButton){
			let selected_botarea_btn = eventButton;
			console.log(selected_botarea_btn.value);
			if(selected_botarea_btn.value == 0){
				let all_botarea_button = document.getElementById('botarea_div').querySelectorAll('button');
				for(const button of all_botarea_button){
					button.classList.toggle('btn_red');
				}
			}else{
				selected_botarea_btn.classList.toggle('btn_red');	
			}
			
		}
	</script>
</div>

</html>